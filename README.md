# Convenience Store Management System Database

이 데이터베이스는 편의점 관리 시스템을 위한 데이터베이스 구조를 정의합니다. 주요 테이블은 **상품 정보**, **공급업체 정보**, **입고/출고 기록**, 그리고 **판매 기록**입니다. 이를 통해 상품의 재고, 입고/출고 내역, 판매 내역 등을 관리할 수 있습니다.

## 데이터베이스 테이블 설명

### 1. **`products` 테이블**
이 테이블은 판매되는 상품의 정보를 저장합니다.

| 컬럼명             | 타입           | 설명                     |
|--------------------|----------------|--------------------------|
| `product_id`       | `INT`          | 상품의 고유 식별자       |
| `name`             | `VARCHAR(255)`  | 상품명                   |
| `price`            | `DECIMAL(10,2)` | 상품 가격                |
| `expiration_date`  | `DATE`         | 상품 유통기한            |
| `quantity`         | `INT`          | 재고 수량                |
| `supplier_id`      | `INT`          | 공급업체 ID (참조)       |

- **참조 관계**: `supplier_id`는 `suppliers` 테이블의 `supplier_id`를 참조합니다.

### 2. **`suppliers` 테이블**
이 테이블은 공급업체 정보를 저장합니다.

| 컬럼명        | 타입          | 설명                     |
|---------------|---------------|--------------------------|
| `supplier_id` | `INT`         | 공급업체 고유 식별자      |
| `name`        | `VARCHAR(255)` | 공급업체명                |
| `contact`     | `VARCHAR(50)`  | 공급업체 연락처           |
| `address`     | `TEXT`         | 공급업체 주소             |

- **참조 관계**: `suppliers` 테이블의 `supplier_id`는 `products` 테이블의 `supplier_id`를 참조합니다.

### 3. **`stock_logs` 테이블**
이 테이블은 상품의 입고 및 출고 기록을 저장합니다.

| 컬럼명          | 타입             | 설명                         |
|-----------------|------------------|------------------------------|
| `log_id`        | `INT`            | 입고/출고 기록 고유 식별자    |
| `change_type`   | `ENUM('입고', '출고')` | 입고 또는 출고 여부           |
| `quantity_change` | `INT`          | 변경된 수량                  |
| `change_time`   | `TIMESTAMP`      | 입고/출고 시각                |
| `product_id`    | `INT`            | 관련 상품의 ID (참조)        |

- **참조 관계**: `product_id`는 `products` 테이블의 `product_id`를 참조합니다.

### 4. **`sales` 테이블**
이 테이블은 판매된 상품의 기록을 저장합니다.

| 컬럼명          | 타입             | 설명                         |
|-----------------|------------------|------------------------------|
| `sale_id`       | `INT`            | 판매 기록 고유 식별자         |
| `quantity_sold` | `INT`            | 판매된 상품 수량             |
| `total_price`   | `DECIMAL(10,2)`  | 판매 총액                     |
| `sale_date`     | `TIMESTAMP`      | 판매 시각                     |
| `product_id`    | `INT`            | 판매된 상품의 ID (참조)       |

- **참조 관계**: `product_id`는 `products` 테이블의 `product_id`를 참조합니다.

---

## 테이블 관계 (ERD)

- **`products`** 테이블은 **`suppliers`** 테이블을 참조하여 각 상품에 대한 공급업체 정보를 연결합니다.
- **`stock_logs`** 테이블은 **`products`** 테이블을 참조하여 각 입고/출고 기록이 어떤 상품에 해당하는지 저장합니다.
- **`sales`** 테이블은 **`products`** 테이블을 참조하여 판매된 상품의 정보를 기록합니다.

## 제약조건

- 각 테이블에는 **기본 키** 제약조건이 설정되어 있습니다. (`product_id`, `supplier_id`, `log_id`, `sale_id`)
- **외래 키** 제약조건을 통해 테이블 간의 관계를 명확하게 연결하며, 데이터 무결성을 유지합니다.
  - `stock_logs` 테이블의 `product_id`는 `products` 테이블의 `product_id`를 참조합니다.
  - `sales` 테이블의 `product_id`는 `products` 테이블의 `product_id`를 참조합니다.
  - `products` 테이블의 `supplier_id`는 `suppliers` 테이블의 `supplier_id`를 참조합니다.

## 예시 데이터

각 테이블에 삽입할 수 있는 예시 데이터는 다음과 같습니다:

### 1. `suppliers` 테이블 예시

| supplier_id | name    | contact        | address            |
|-------------|---------|----------------|--------------------|
| 1           | ABC 유통 | 010-1234-5678  | 서울특별시 강남구 역삼동 123-45 |
| 2           | XYZ 유통 | 010-9876-5432  | 부산광역시 해운대구 우동 234-56 |

### 2. `products` 테이블 예시

| product_id | name     | price | expiration_date | quantity | supplier_id |
|------------|----------|-------|-----------------|----------|-------------|
| 1          | 아이스크림 | 2000  | 2025-06-30      | 100      | 1           |
| 2          | 음료수   | 1500  | 2025-12-31      | 50       | 2           |

### 3. `stock_logs` 테이블 예시

| log_id | change_type | quantity_change | change_time           | product_id |
|--------|-------------|-----------------|-----------------------|------------|
| 1      | 입고        | 50              | 2025-03-01 10:00:00   | 1          |
| 2      | 출고        | 20              | 2025-03-02 14:30:00   | 1          |
| 3      | 입고        | 30              | 2025-03-03 09:00:00   | 2          |

### 4. `sales` 테이블 예시

| sale_id | quantity_sold | total_price | sale_date            | product_id |
|---------|---------------|-------------|----------------------|------------|
| 1       | 10            | 20000       | 2025-03-02 14:00:00  | 1          |
| 2       | 5             | 7500        | 2025-03-03 16:00:00  | 2          |

---

## 결론

이 데이터베이스 구조는 편의점에서 상품의 입고/출고, 재고 관리, 판매 추적 및 공급업체 정보를 효율적으로 관리할 수 있도록 설계되었습니다. 다양한 데이터 무결성 제약 조건과 외래 키를 통해 시스템의 안정성과 정확성을 보장합니다.